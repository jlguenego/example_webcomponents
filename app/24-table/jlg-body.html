<template id="jlg-body">
	<div>
		<button onclick="circle.wc(this).refresh()">Refresh</button>
		<jlg-table table="[myTable]" onDelete="o(this).delete"></jlg-table>
	</div>
</template>

<script>
	class JLGBody extends circle.Element {

		connectedCallback() {
			super.connectedCallback();
			this.refresh();
		}

		refresh() {
			console.log('doAction start');
			const http = circle.get('http');

			http.get('content.json').then((response) => {
				console.log('response', response);
				this.model.myTable = response.data.content;
			}).catch((error) => {
				console.log('error', error);
			});
		}

		delete(index) {
			console.log('delete', index);
			this.model.myTable.splice(index, 1);
		}
	}
	JLGBody.register();

</script>

<link async rel="import" href="jlg-table.html">

