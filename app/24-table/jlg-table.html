<template id="jlg-table">
	<style>
		:host,
		jlg-table {
			display: block;
			width: 300px;
			padding: 10px;
			margin: 0px;
			border: 1px solid black;
		}

		o-repeat[iterator=header] {
			display: block;
			width: 100%;
			padding: 0px;
			margin: 0px;
			font-weight: bold;
			background-color: hsl(0, 100%, 95%);
		}
	</style>
	<o-repeat list="[headers]" iterator="header">
		<template>
			<style>
				o-repeat-item,
				:host {
					display: inline-block;
					width: 130px;
					padding: 10px;
					margin: 0px;
				}
			</style>
			<span>{{header}}</span>
		</template>
	</o-repeat>
	<o-repeat list="[body]" iterator="row" css="jlg-table.css">
		<template>
			<style>
				o-repeat-item,
				:host {
					display: block;
					width: 100%;
					padding: 0px;
					margin: 0px;
				}
			</style>
			<o-repeat list="[row]" iterator="cell">
				<template>
					<style>
						o-repeat-item,
						:host {
							display: inline-block;
							width: 130px;
							padding: 10px;
							margin: 0px;
						}
					</style>
					<span>{{cell}}</span>
				</template>
			</o-repeat>
		</template>
	</o-repeat>
</template>

<script>
	class JLGTable extends circle.Element {
		connectedCallback() {
			super.connectedCallback();
			if (!(this.model.table && this.model.table.length > 0)) {
				return;
			}
			this.model.headers = Object.keys(this.model.table[0]);
			this.model.body = this.model.table.map(row => this.model.headers.map(header => row[header]));
		}
	}
	JLGTable.register();

</script>