<template id="jlg-table">
	<style>
		:host,
		jlg-table {
			display: block;
			width: 300px;
			padding: 10px;
			margin: 0px;
			border: 1px solid black;
		}

		jlg-th {
			display: block;
			width: 100%;
			padding: 0px;
			margin: 0px;
			font-weight: bold;
			background-color: hsl(0, 100%, 95%);
		}
	</style>
	<jlg-th>
		<o-repeat list="[headers]" iterator="header">
			<template>
				<style>
					cell {
						display: inline-block;
						width: 130px;
						padding: 10px;
						margin: 0px;
						box-sizing: border-box;
					}
				</style>
				<cell>{{header}}</cell>
			</template>
		</o-repeat>
	</jlg-th>
	<o-repeat list="[body]" iterator="row" css="jlg-table.css">
		<template>
			<style>
				jlg-row {
					display: block;
					width: 100%;
					padding: 0px;
					margin: 0px;
				}
			</style>
			<jlg-row>
				<o-repeat list="[row]" iterator="cell">
					<template>
						<style>
							cell {
								display: inline-block;
								width: 128px;
								padding: 10px;
								margin: 0px;
							}
						</style>
						<cell>{{cell}}</cell>
					</template>
				</o-repeat>
			</jlg-row>
		</template>
	</o-repeat>
</template>

<script>
	class JLGTable extends circle.Element {

		digest(key) {
			if (key !== 'table') {
				super.digest(key);
				return;
			}
			console.log('digest key', key);
			if (!(this.model.table && this.model.table.length > 0)) {
				return;
			}
			this.model.headers = Object.keys(this.model.table[0]);
			this.model.body = this.model.table.map(row => this.model.headers.map(header => row[header]));
			super.digest(key);
		}


		
	}
	JLGTable.register();

</script>